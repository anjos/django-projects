{% load i18n repositories %}
{% comment %}requires "repo"{% endcomment %}
{% if repo.tags %}
<span class="bubble">
  <span class="tags">
    <table>
      <tr class="bubble_title"><td>{% trans "Lastest tags" %}</td></tr>
      <tr>
        <td>
          <table>
            <tr>
              <th>{% trans "tag" %}</th>
              <th colspan="2">{% trans "actions" %}</th>
              <th>{% trans "epoch" %}</th>
            </tr>
            {% for tag in repo.tags|reverse|slice:":max_tags" %}
            <tr class="{% cycle 'even' 'odd' %}">
              <td class="tags"><span class="tag">{{ tag.name }}</span></td>
              <td class="tree"><a href="{% url djpro:view-tree tag.commit %}?r={{ repo.path|name }}">{% trans "tree" %}</a></td>
              <td class="download"><a href="{% url djpro:download-tree tag.commit %}?r={{ repo.path|name }}">{% trans "download" %}</a></td>
              <td class="date">{{ tag.commit.committed_date|relative_date }}</td>
            </tr>
            {% endfor %}
          </table>
        </td>
      </tr>
    </table>
  </span>
</span>
{% endif %}
